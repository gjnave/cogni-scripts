{"last_node_id":45,"last_link_id":51,"nodes":[{"id":32,"type":"WanVideoBlockSwap","pos":[232.6178741455078,-338.61407470703125],"size":[315,106],"flags":{},"order":0,"mode":0,"inputs":[],"outputs":[{"name":"block_swap_args","localized_name":"block_swap_args","type":"BLOCKSWAPARGS","links":[39],"slot_index":0}],"properties":{"cnr_id":"ComfyUI-WanVideoWrapper","ver":"6475e85b85213bb29b256551adeae13784bba2d2","Node name for S&R":"WanVideoBlockSwap"},"widgets_values":[10,false,false]},{"id":37,"type":"Note","pos":[170.94039916992188,-750.3395385742188],"size":[303.0501403808594,88],"flags":{},"order":1,"mode":0,"inputs":[],"outputs":[],"properties":{},"widgets_values":["If you have Triton installed, connect this for ~30% speed increase"],"color":"#432","bgcolor":"#653"},{"id":36,"type":"Note","pos":[712.7784423828125,-580.95947265625],"size":[378.52294921875,144.30191040039062],"flags":{},"order":2,"mode":0,"inputs":[],"outputs":[],"properties":{},"widgets_values":["fp8_fast seems to cause huge quality degradation\n\nfp_16_fast enables \"Full FP16 Accmumulation in FP16 GEMMs\" feature available in the very latest pytorch nightly, this is around 20% speed boost. \n\nSageattn if you have it installed can be used for almost double inference speed"],"color":"#432","bgcolor":"#653"},{"id":28,"type":"WanVideoDecode","pos":[1346.09375,-467.1110534667969],"size":[315,174],"flags":{},"order":15,"mode":0,"inputs":[{"name":"vae","localized_name":"vae","type":"WANVAE","link":34},{"name":"samples","localized_name":"samples","type":"LATENT","link":33}],"outputs":[{"name":"images","localized_name":"images","type":"IMAGE","links":[41],"slot_index":0}],"properties":{"cnr_id":"ComfyUI-WanVideoWrapper","ver":"6475e85b85213bb29b256551adeae13784bba2d2","Node name for S&R":"WanVideoDecode"},"widgets_values":[true,272,272,144,128]},{"id":33,"type":"Note","pos":[234.58334350585938,-189.06956481933594],"size":[351.70458984375,88],"flags":{},"order":3,"mode":0,"inputs":[],"outputs":[],"properties":{},"widgets_values":["Models:\nhttps://huggingface.co/Kijai/WanVideo_comfy/tree/main"],"color":"#432","bgcolor":"#653"},{"id":13,"type":"LoadWanVideoClipTextEncoder","pos":[153.7196502685547,226.0297088623047],"size":[510.6601257324219,106],"flags":{},"order":4,"mode":0,"inputs":[],"outputs":[{"name":"wan_clip_vision","localized_name":"wan_clip_vision","type":"CLIP_VISION","links":[17],"slot_index":0}],"properties":{"cnr_id":"ComfyUI-WanVideoWrapper","ver":"6475e85b85213bb29b256551adeae13784bba2d2","Node name for S&R":"LoadWanVideoClipTextEncoder"},"widgets_values":["open-clip-xlm-roberta-large-vit-huge-14_fp16.safetensors","fp16","offload_device"]},{"id":11,"type":"LoadWanVideoT5TextEncoder","pos":[39.435157775878906,-25.999603271484375],"size":[377.1661376953125,130],"flags":{},"order":5,"mode":0,"inputs":[],"outputs":[{"name":"wan_t5_model","localized_name":"wan_t5_model","type":"WANTEXTENCODER","links":[15],"slot_index":0}],"properties":{"cnr_id":"ComfyUI-WanVideoWrapper","ver":"6475e85b85213bb29b256551adeae13784bba2d2","Node name for S&R":"LoadWanVideoT5TextEncoder"},"widgets_values":["umt5-xxl-enc-bf16.safetensors","bf16","main_device","disabled"]},{"id":35,"type":"WanVideoTorchCompileSettings","pos":[-118.9432373046875,-613.2799682617188],"size":[390.5999755859375,178],"flags":{},"order":6,"mode":0,"inputs":[],"outputs":[{"name":"torch_compile_args","localized_name":"torch_compile_args","type":"WANCOMPILEARGS","links":[],"slot_index":0}],"properties":{"cnr_id":"ComfyUI-WanVideoWrapper","ver":"6475e85b85213bb29b256551adeae13784bba2d2","Node name for S&R":"WanVideoTorchCompileSettings"},"widgets_values":["inductor",false,"default",false,64,true]},{"id":42,"type":"UpscaleModelLoader","pos":[2245.108642578125,-729.957275390625],"size":[315,58],"flags":{},"order":7,"mode":0,"inputs":[],"outputs":[{"name":"UPSCALE_MODEL","localized_name":"UPSCALE_MODEL","type":"UPSCALE_MODEL","links":[46],"slot_index":0}],"properties":{"cnr_id":"comfy-core","ver":"0.3.17","Node name for S&R":"UpscaleModelLoader"},"widgets_values":["4x_foolhardy_Remacri.pth"]},{"id":43,"type":"ImageUpscaleWithModel","pos":[2808.443603515625,-563.4651489257812],"size":[340.20001220703125,46],"flags":{},"order":18,"mode":0,"inputs":[{"name":"upscale_model","localized_name":"upscale_model","type":"UPSCALE_MODEL","link":46},{"name":"image","localized_name":"image","type":"IMAGE","link":47}],"outputs":[{"name":"IMAGE","localized_name":"IMAGE","type":"IMAGE","links":[48],"slot_index":0}],"properties":{"cnr_id":"comfy-core","ver":"0.3.17","Node name for S&R":"ImageUpscaleWithModel"},"widgets_values":[]},{"id":39,"type":"FILM VFI","pos":[2175.208740234375,-541.02099609375],"size":[443.4000244140625,126],"flags":{},"order":17,"mode":0,"inputs":[{"name":"frames","localized_name":"frames","type":"IMAGE","link":43},{"name":"optional_interpolation_states","localized_name":"optional_interpolation_states","type":"INTERPOLATION_STATES","shape":7,"link":null}],"outputs":[{"name":"IMAGE","localized_name":"IMAGE","type":"IMAGE","links":[47,49],"slot_index":0}],"properties":{"cnr_id":"comfyui-frame-interpolation","ver":"c336f7184cb1ac1243381e725fea1ad2c0a10c09","Node name for S&R":"FILM VFI"},"widgets_values":["film_net_fp32.pt",10,2]},{"id":21,"type":"WanVideoVAELoader","pos":[146.23831176757812,430.6906433105469],"size":[315,82],"flags":{},"order":8,"mode":0,"inputs":[],"outputs":[{"name":"vae","localized_name":"vae","type":"WANVAE","links":[21,34],"slot_index":0}],"properties":{"cnr_id":"ComfyUI-WanVideoWrapper","ver":"6475e85b85213bb29b256551adeae13784bba2d2","Node name for S&R":"WanVideoVAELoader"},"widgets_values":["Wan\\Wan2_1_VAE_bf16.safetensors","bf16"]},{"id":38,"type":"GetImageSizeAndCount","pos":[1829.7081298828125,-396.2576599121094],"size":[277.20001220703125,86],"flags":{},"order":16,"mode":0,"inputs":[{"name":"image","localized_name":"image","type":"IMAGE","link":41}],"outputs":[{"name":"image","localized_name":"image","type":"IMAGE","links":[43],"slot_index":0},{"name":"width","localized_name":"width","label":"768 width","type":"INT","links":null},{"name":"height","localized_name":"height","label":"768 height","type":"INT","links":null},{"name":"count","localized_name":"count","label":"61 count","type":"INT","links":null}],"properties":{"cnr_id":"comfyui-kjnodes","ver":"1a4259f05206d7360be7a90145b5839d5b64d893","Node name for S&R":"GetImageSizeAndCount"},"widgets_values":[]},{"id":30,"type":"VHS_VideoCombine","pos":[3298.42919921875,-547.9916381835938],"size":[214.76666259765625,542.7666625976562],"flags":{},"order":20,"mode":0,"inputs":[{"name":"images","localized_name":"images","type":"IMAGE","link":48},{"name":"audio","localized_name":"audio","type":"AUDIO","shape":7,"link":null},{"name":"meta_batch","localized_name":"meta_batch","type":"VHS_BatchManager","shape":7,"link":null},{"name":"vae","localized_name":"vae","type":"VAE","shape":7,"link":null}],"outputs":[{"name":"Filenames","localized_name":"Filenames","type":"VHS_FILENAMES","links":null}],"properties":{"cnr_id":"comfyui-videohelpersuite","ver":"4c7858ddd5126f7293dc3c9f6e0fc4c263cde079","Node name for S&R":"VHS_VideoCombine"},"widgets_values":{"frame_rate":24,"loop_count":0,"filename_prefix":"WanVideo2_1","format":"video/nvenc_h264-mp4","pix_fmt":"yuv420p","bitrate":10,"megabit":true,"save_metadata":true,"pingpong":false,"save_output":true,"videopreview":{"hidden":false,"paused":false,"params":{"filename":"WanVideo2_1_00042.mp4","subfolder":"","type":"output","format":"video/nvenc_h264-mp4","frame_rate":24,"workflow":"WanVideo2_1_00042.png","fullpath":"C:\\Users\\Ayric\\Source\\Repos\\ComfyUI_windows_portable\\ComfyUI\\output\\WanVideo2_1_00042.mp4"}}}},{"id":22,"type":"WanVideoModelLoader","pos":[619.538330078125,-423.813232421875],"size":[477.4410095214844,226.43276977539062],"flags":{},"order":11,"mode":0,"inputs":[{"name":"compile_args","localized_name":"compile_args","type":"WANCOMPILEARGS","shape":7,"link":null},{"name":"block_swap_args","localized_name":"block_swap_args","type":"BLOCKSWAPARGS","shape":7,"link":39},{"name":"lora","localized_name":"lora","type":"WANVIDLORA","shape":7,"link":null},{"name":"vram_management_args","localized_name":"vram_management_args","type":"VRAM_MANAGEMENTARGS","shape":7,"link":null}],"outputs":[{"name":"model","localized_name":"model","type":"WANVIDEOMODEL","links":[29],"slot_index":0}],"properties":{"cnr_id":"ComfyUI-WanVideoWrapper","ver":"6475e85b85213bb29b256551adeae13784bba2d2","Node name for S&R":"WanVideoModelLoader"},"widgets_values":["WAN\\Wan2_1-I2V-14B-480P_fp8_e4m3fn.safetensors","fp16","fp8_e4m3fn","main_device","sageattn"]},{"id":17,"type":"WanVideoImageClipEncode","pos":[634.52001953125,475.9789733886719],"size":[315,266],"flags":{},"order":13,"mode":0,"inputs":[{"name":"clip_vision","localized_name":"clip_vision","type":"CLIP_VISION","link":17},{"name":"image","localized_name":"image","type":"IMAGE","link":18},{"name":"vae","localized_name":"vae","type":"WANVAE","link":21}],"outputs":[{"name":"image_embeds","localized_name":"image_embeds","type":"WANVIDIMAGE_EMBEDS","links":[32],"slot_index":0}],"properties":{"cnr_id":"ComfyUI-WanVideoWrapper","ver":"6475e85b85213bb29b256551adeae13784bba2d2","Node name for S&R":"WanVideoImageClipEncode"},"widgets_values":[768,768,61,true,0,1,1,true]},{"id":44,"type":"VHS_VideoCombine","pos":[2997.102294921875,-210.8837127685547],"size":[214.76666259765625,542.7666625976562],"flags":{},"order":19,"mode":0,"inputs":[{"name":"images","localized_name":"images","type":"IMAGE","link":49},{"name":"audio","localized_name":"audio","type":"AUDIO","shape":7,"link":null},{"name":"meta_batch","localized_name":"meta_batch","type":"VHS_BatchManager","shape":7,"link":null},{"name":"vae","localized_name":"vae","type":"VAE","shape":7,"link":null}],"outputs":[{"name":"Filenames","localized_name":"Filenames","type":"VHS_FILENAMES","links":null}],"properties":{"cnr_id":"comfyui-videohelpersuite","ver":"4c7858ddd5126f7293dc3c9f6e0fc4c263cde079","Node name for S&R":"VHS_VideoCombine"},"widgets_values":{"frame_rate":24,"loop_count":0,"filename_prefix":"WanVideo2_1","format":"video/h264-mp4","pix_fmt":"yuv420p","crf":19,"save_metadata":true,"trim_to_audio":false,"pingpong":false,"save_output":false,"videopreview":{"hidden":false,"paused":false,"params":{"filename":"WanVideo2_1_00007.mp4","subfolder":"","type":"temp","format":"video/h264-mp4","frame_rate":24,"workflow":"WanVideo2_1_00007.png","fullpath":"C:\\Users\\Ayric\\Source\\Repos\\ComfyUI_windows_portable\\ComfyUI\\temp\\WanVideo2_1_00007.mp4"}}}},{"id":27,"type":"WanVideoSampler","pos":[1188.443359375,-212.1593780517578],"size":[315,534.1923217773438],"flags":{},"order":14,"mode":0,"inputs":[{"name":"model","localized_name":"model","type":"WANVIDEOMODEL","link":29},{"name":"text_embeds","localized_name":"text_embeds","type":"WANVIDEOTEXTEMBEDS","link":30},{"name":"image_embeds","localized_name":"image_embeds","type":"WANVIDIMAGE_EMBEDS","link":32},{"name":"samples","localized_name":"samples","type":"LATENT","shape":7,"link":null},{"name":"feta_args","localized_name":"feta_args","type":"FETAARGS","shape":7,"link":null},{"name":"context_options","localized_name":"context_options","type":"WANVIDCONTEXT","shape":7,"link":null},{"name":"teacache_args","localized_name":"teacache_args","type":"TEACACHEARGS","shape":7,"link":51},{"name":"flowedit_args","localized_name":"flowedit_args","type":"FLOWEDITARGS","shape":7,"link":null}],"outputs":[{"name":"samples","localized_name":"samples","type":"LATENT","links":[33],"slot_index":0}],"properties":{"cnr_id":"ComfyUI-WanVideoWrapper","ver":"6475e85b85213bb29b256551adeae13784bba2d2","Node name for S&R":"WanVideoSampler"},"widgets_values":[30,6,5,42069,"fixed",true,"unipc",0,1]},{"id":45,"type":"WanVideoTeaCache","pos":[692.6961059570312,193.48968505859375],"size":[315,154],"flags":{},"order":9,"mode":0,"inputs":[],"outputs":[{"name":"teacache_args","localized_name":"teacache_args","type":"TEACACHEARGS","links":[51]}],"properties":{"cnr_id":"ComfyUI-WanVideoWrapper","ver":"bc11af31e4e720e6926a0612e88b65c3d1c49fc7","Node name for S&R":"WanVideoTeaCache"},"widgets_values":[0.3,1,-1,"main_device",true]},{"id":18,"type":"LoadImage","pos":[161.364501953125,594.0593872070312],"size":[315,314],"flags":{},"order":10,"mode":0,"inputs":[],"outputs":[{"name":"IMAGE","localized_name":"IMAGE","type":"IMAGE","links":[18]},{"name":"MASK","localized_name":"MASK","type":"MASK","links":null}],"properties":{"cnr_id":"comfy-core","ver":"0.3.17","Node name for S&R":"LoadImage"},"widgets_values":["ComfyUI_temp_zefse_00003_.png","image"]},{"id":16,"type":"WanVideoTextEncode","pos":[612.2258911132812,-153.02053833007812],"size":[540.388671875,302.7823791503906],"flags":{},"order":12,"mode":0,"inputs":[{"name":"t5","localized_name":"t5","type":"WANTEXTENCODER","link":15}],"outputs":[{"name":"text_embeds","localized_name":"text_embeds","type":"WANVIDEOTEXTEMBEDS","links":[30],"slot_index":0}],"properties":{"cnr_id":"ComfyUI-WanVideoWrapper","ver":"6475e85b85213bb29b256551adeae13784bba2d2","Node name for S&R":"WanVideoTextEncode"},"widgets_values":["cinematic action shot of a gunslinger with a long beard walking towards the camera and raising his gun dramatically.  there are people behind him, running away.\n\nIn the background, a dusty town set in a ((wild-west)) atmosphere.  1800's, western, cowboy film","bad quality video",true]}],"links":[[15,11,0,16,0,"WANTEXTENCODER"],[17,13,0,17,0,"WANCLIP"],[18,18,0,17,1,"IMAGE"],[21,21,0,17,2,"VAE"],[29,22,0,27,0,"WANVIDEOMODEL"],[30,16,0,27,1,"WANVIDEOTEXTEMBEDS"],[32,17,0,27,2,"WANVIDIMAGE_EMBEDS"],[33,27,0,28,1,"LATENT"],[34,21,0,28,0,"VAE"],[39,32,0,22,1,"BLOCKSWAPARGS"],[41,28,0,38,0,"IMAGE"],[43,38,0,39,0,"IMAGE"],[46,42,0,43,0,"UPSCALE_MODEL"],[47,39,0,43,1,"IMAGE"],[48,43,0,30,0,"IMAGE"],[49,39,0,44,0,"IMAGE"],[51,45,0,27,6,"TEACACHEARGS"]],"groups":[],"config":{},"extra":{"ds":{"scale":2.50196279107152,"offset":[-2965.039950323472,354.5545954451471]},"node_versions":{"ComfyUI-WanVideoWrapper":"66c8ebe4d375e5dc1a510745931ae9bd14ec7887","comfy-core":"0.3.18","ComfyUI-KJNodes":"9a15e22f5e9416c0968ce3de33923f8f601257dd","ComfyUI-VideoHelperSuite":"2c25b8b53835aaeb63f831b3137c705cf9f85dce"},"VHS_latentpreview":true,"VHS_latentpreviewrate":0,"VHS_MetadataImage":true,"VHS_KeepIntermediate":true,"ue_links":[]},"version":0.4}